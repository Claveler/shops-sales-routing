.page {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  background: #F8F9F9;
}

.body {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* ---- Main content area (left side) ---- */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}

.topBar {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  padding: 16px 16px 0 16px;
  flex-shrink: 0;
  position: relative;
  z-index: 2;
}

.topBar > :first-child {
  flex: 1;
  min-width: 0;
}

.actions {
  display: flex;
  align-items: center;
  gap: 8px;
  /* Keep action circles visibly above the folder border seam. */
  padding-bottom: 6px;
  flex-shrink: 0;
}

.actionBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  font-size: 18px;
  color: var(--fz-primary-600, #0079CA);
  background: var(--fz-bg-card, #fff);
  border: 2px solid #BCC5CD;
  cursor: pointer;
  transition: background var(--fz-transition-fast, 150ms ease-in-out);
}

.actionBtn:hover {
  background: var(--fz-bg-subtle, #f9fafb);
}

/* ---- Content: filters + grid ---- */
.content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 8px 16px 16px;
  min-height: 0;
  overflow: hidden;
  background: #FFFFFF;
  border: 1px solid var(--fz-border-color, #ccd2d8);
  border-radius: 0 12px 12px 12px;
  margin: -1px 16px 16px;
  position: relative;
  z-index: 1;
}

.contentInner {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  overflow: hidden;
  padding: 8px 16px 16px;
  background: #FFFFFF;
  border-radius: var(--fz-border-radius, 8px);
}

/* ---- iMin Device Preview ---- */
.devicePreviewBackdrop {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #F7F8FB;
  z-index: 1;
  overflow: hidden;
}

/* Floating toggle button — sits outside the device frame in the backdrop */
/* Root wrapper for device-preview mode: fills the viewport, stacks
   the external toggle above the scrollable backdrop. */
.devicePreviewRoot {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* Centered toggle that sits outside the device frame, at the top of
   the viewport.  Uses the same visual style as the header button. */
.devicePreviewToggleFloat {
  position: absolute;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2; /* above the backdrop */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  height: 40px;
  padding: 0 14px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  background: var(--fz-primary-600, #0079CA);
  color: #fff;
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  cursor: pointer;
  transition: background-color 200ms ease, border-color 200ms ease;
}

.devicePreviewToggleFloat:hover {
  background: #006bb5;
  border-color: #006bb5;
}

/*
 * 3/4-angle iMin Swan 1 Pro device frame.
 * Image: 7680×4320.  The frame container matches at 1:1 so the
 * matrix3d corner coordinates (in px) line up directly.
 */
.deviceFrame {
  position: relative;
  width: 7680px;
  height: 4320px;
  flex-shrink: 0;
  transform-origin: center;
}

.deviceImage {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
  user-select: none;
}

/*
 * The POS content (1397×786) is perspective-warped via matrix3d to land
 * on the screen quadrilateral measured from the product photo (Photopea):
 *   TL (2253, 821.34)     TR (5070.92, 915.66)
 *   BL (2641.73, 2778.30) BR (5497.92, 2629.11)
 *
 * TL X visually calibrated to 2254, Y to 822.34 (Photopea raw was 2553.53 but that
 * left the screen wallpaper exposed at the top-left corner).
 *
 * matrix3d computed via DLT (Direct Linear Transform) from 4-point
 * correspondences mapping the rectangle (0,0)–(1397,786) to those corners.
 */
.deviceScreen {
  position: absolute;
  top: 0;
  left: 0;
  width: 1397px;
  height: 786px;
  overflow: hidden;
  transform-origin: 0 0;
  transform: matrix3d(
    2.5221779402,  0.1587143802, 0, 0.0000995984,
    0.3796211677,  2.3688823325, 0, -0.0000435117,
    0,              0,            1,  0,
    2253,           821.34,       0,  1
  );
  /* Subtle overall softening to reduce the "too crisp for a photo" look */
  filter: blur(0.2px);
}

/*
 * Depth-of-field overlay: simulates camera focus fall-off.
 * Left edge (closer to camera) stays sharp; right edge (further) gets blurred.
 * Uses backdrop-filter with a gradient mask so no DOM duplication is needed.
 */
.deviceScreenDofOverlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  backdrop-filter: blur(0.6px);
  -webkit-backdrop-filter: blur(0.6px);
  mask-image: linear-gradient(to right, transparent 0%, transparent 15%, black 85%, black 100%);
  -webkit-mask-image: linear-gradient(to right, transparent 0%, transparent 15%, black 85%, black 100%);
  z-index: 1;
}

/*
 * Screen glare overlay: replicates the diagonal glare visible in the
 * product photo.  The glare crosses the display from ~(66.6%, 0%) at
 * the top to ~(14.1%, 100%) at the bottom — angle ≈ 133°.
 * Mathematically the glare line sits at ~43.56% along the 133° gradient.
 *
 * Two stacked layers:
 *   1) A slow, wide fade from transparent → 30% white, ending at the line.
 *      Hard-clipped to transparent on the right side of the line.
 *   2) (same gradient direction, same line position)
 *
 * This decouples the sharp right edge from the gradual left fade.
 */
.deviceScreenGlare {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  background:
    /* Layer: slow fade from left, razor-sharp cutoff on the right */
    linear-gradient(
      133deg,
      transparent 0%,
      transparent 30%,
      rgba(255, 255, 255, 0.30) 43.6%,
      transparent 43.64%,
      transparent 100%
    );
}

.pageConstrained {
  width: 1397px;
  height: 786px;
}
